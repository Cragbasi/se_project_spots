!function(){"use strict";function e(e,t,r){e.querySelector(`.${t.id}-error`).classList.remove(r.errorClass),t.classList.remove(r.inputErrorClass)}const t=e=>{e.disabled=!0},r=(t,r)=>{Array.from(t.querySelectorAll(r.inputSelector)).forEach((o=>{e(t,o,r)}))},o={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button-save",inactiveButtonClass:"modal__button-save_disabled",inputErrorClass:"modal__input_error",errorClass:"modal__input-error_active"},n=document.querySelector(".page"),s=n.querySelector(".profile"),a=n.querySelector("#editProfileButton"),c=n.querySelector("#editProfileOverlayedButton"),i=n.querySelector("#newPostButton"),l=n.querySelector("#editProfile"),d=n.querySelector("#editProfileAvatar"),u=l.querySelector("#saveEditProfile"),h=document.forms.editProfileAvatarForm,v=n.querySelector("#newPost"),f=v.querySelector("#saveNewPostButton"),m=l.querySelector("#closeEditProfileButton"),y=d.querySelector("#closeEditProfileAvatarButton"),_=d.querySelector("#editProfileAvatarSubmitButton"),S=v.querySelector("#closeNewPostButton"),p=l.querySelector("#formEditProfile"),q=document.forms.formNewPost,E=n.querySelector("#clickedPicture"),k=E.querySelector(".modal__image"),L=E.querySelector(".modal__image-title"),b=n.querySelector(".cards"),C=n.querySelector("#deleteImageQuery"),g=C.querySelector("#confirmCardDelete"),P=C.querySelector("#cancelCardDelete"),x=Array.from(n.querySelectorAll(".modal"));let A,U;const B=new class{constructor(e){this._options=e}getUserData(){return Promise.all([this.renderUserInfo(),this.getInitialCards()])}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${res.status}`)}renderUserInfo(){return fetch(`${this._options.baseUrl}/users/me`,{headers:this._options.headers}).then((e=>this._checkResponse(e)))}editUserInfo(e){let{name:t,about:r}=e;return fetch(`${this._options.baseUrl}/users/me`,{method:"PATCH",headers:this._options.headers,body:JSON.stringify({name:t,about:r})}).then((e=>this._checkResponse(e)))}getInitialCards(){return fetch(`${this._options.baseUrl}/cards`,{headers:this._options.headers}).then((e=>this._checkResponse(e)))}postCard(e,t){return fetch(`${this._options.baseUrl}/cards`,{method:"POST",headers:this._options.headers,body:JSON.stringify({name:e,link:t})}).then((e=>this._checkResponse(e)))}removeCard(e){return fetch(`${this._options.baseUrl}/cards/${e}`,{method:"DELETE",headers:this._options.headers,body:JSON.stringify({cardId:e})}).then((e=>this._checkResponse(e)))}addLike(e,t){return fetch(`${this._options.baseUrl}/cards/${e}/likes`,{method:t,headers:this._options.headers,body:JSON.stringify({cardId:e})}).then((e=>this._checkResponse(e)))}changeProfilePicture(e){return fetch(`${this._options.baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._options.headers,body:JSON.stringify({avatar:e})}).then((e=>this._checkResponse(e)))}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"263132f6-100d-422f-9deb-cb4a2234cfd1","Content-Type":"application/json"}});B.getUserData().then((e=>{let[t,r]=e;var o;o=t,$[0].textContent=o.name,$[1].textContent=o.about,N.src=o.avatar,T(r)})).catch((e=>{let[t,r]=e;console.error(t,r)}));const D=n.querySelector(".avatar__information"),$=[D.querySelector(".avatar__name"),D.querySelector(".avatar__description")],I=[l.querySelector("#name"),l.querySelector("#description")],w=[v.querySelector("#picture"),v.querySelector("#caption")],N=s.querySelector(".avatar__image"),R=d.querySelector("#picture");function T(e){if(Array.isArray(e))e.forEach((e=>{const t=J(e);b.append(t)}));else{const t=J(e);b.prepend(t)}}function O(e){e.classList.toggle("card__love-button_activated")}function J(e){const t=b.querySelector("#card").content.querySelector(".card").cloneNode(!0),r=t.querySelector(".card__image");r.src=e.link,r.alt=e.name,t.querySelector(".card__description").textContent=e.name;const o=t.querySelector(".card__love-button");return e.isLiked&&O(o),o.addEventListener("click",(()=>{!function(e,t){e.classList.contains("card__love-button_activated")?B.addLike(t,"DELETE").then((t=>{console.log(t),O(e)})).catch(console.error):B.addLike(t,"PUT").then((t=>{console.log(t),O(e)})).catch(console.error)}(o,e._id)})),t.querySelector(".card__delete-button").addEventListener("click",(()=>{A=t,U=e._id,j(C)})),r.addEventListener("click",(()=>{var e,o;e=t,o=r,k.src=o.src,k.alt=o.alt,L.textContent=e.textContent,j(E)})),t}function j(e){e.classList.add("modal_opened"),document.addEventListener("keydown",Q)}function H(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",Q)}a.addEventListener("click",(()=>{r(l,o),t(u),j(l);for(let e=0;e<I.length;e++)I[e].value=$[e].textContent})),c.addEventListener("click",(()=>{r(d,o),t(h),j(d)})),g.addEventListener("click",(function(){g.textContent="Deleting...",B.removeCard(U).then((()=>{var e;(e=A).remove(e),H(C)})).catch(console.error).finally((()=>{g.textContent="Delete"}))})),P.addEventListener("click",(()=>H(C))),E.querySelector("#closeImageButton").addEventListener("click",(()=>{H(E)})),C.querySelector("#closeDeleteImageQueryButton").addEventListener("click",(()=>{H(C)}));const Q=e=>{"Escape"!==e.key&&"Esc"!==e.key||x.forEach((e=>{e.classList.contains("modal_opened")&&H(e)}))};var z;x.forEach((e=>{e.addEventListener("mousedown",(t=>{e.classList.contains("modal_opened")&&t.target===t.currentTarget&&H(t.target)}))})),m.addEventListener("click",(()=>{H(l)})),y.addEventListener("click",(()=>{H(d)})),i.addEventListener("click",(()=>{j(v)})),S.addEventListener("click",(function(){H(v)})),p.addEventListener("submit",(function(e){e.preventDefault(),u.textContent="Saving...",B.editUserInfo({name:I[0].value,about:I[1].value}).then((e=>{for(let e=0;e<I.length;e++)$[e].textContent=I[e].value;t(u),p.reset(),H(l)})).catch((e=>{console.error(e)})).finally((()=>{u.textContent="Save"}))})),q.addEventListener("submit",(function(e){e.preventDefault(),f.textContent="Saving...";const r={name:w[1].value,link:w[0].value};B.postCard(r.name,r.link).then((e=>{T(e),t(f),q.reset(),H(v)})).catch((e=>{console.error(e)})).finally((()=>{f.textContent="Save"}))})),h.addEventListener("submit",(function(e){e.preventDefault(),_.textContent="Saving...",B.changeProfilePicture(R.value).then((e=>{N.src=R.value,t(_),h.reset(),H(d)})).catch((e=>{console.error(e)})).finally((()=>{_.textContent="Save"}))})),z=o,document.querySelectorAll(z.formSelector).forEach((r=>{!function(r,o){const n=Array.from(r.querySelectorAll(o.inputSelector));n.forEach((s=>{s.addEventListener("input",(a=>{!function(t,r,o){r.validity.valid?e(t,r,o):function(e,t,r){const o=e.querySelector(`.${t.id}-error`);o.textContent=t.validationMessage,o.classList.add(r.errorClass),t.classList.add(r.inputErrorClass)}(t,r,o)}(r,s,o),function(e,r,o){const n=r.querySelector(o.submitButtonSelector);(e=>e.some((e=>!e.validity.valid)))(e)?t(n):n.disabled=!1}(n,r,o)}))}))}(r,z)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoieUJBcURBLFNBQVNBLEVBQWVDLEVBQU1DLEVBQVNDLEdBQ2xCRixFQUFLRyxjQUFjLElBQUlGLEVBQVFHLFlBQ3ZDQyxVQUFVQyxPQUFPSixFQUFPSyxZQUNuQ04sRUFBUUksVUFBVUMsT0FBT0osRUFBT00sZ0JBQ2xDLENBY0EsTUFNYUMsRUFBdUJDLElBQ2xDQSxFQUFTQyxVQUFXLENBQUksRUFJYkMsRUFBd0NBLENBQUNaLEVBQU1FLEtBQ3BDVyxNQUFNQyxLQUFLZCxFQUFLZSxpQkFBaUJiLEVBQU9jLGdCQUdoREMsU0FBU2hCLElBQ3JCRixFQUFlQyxFQUFNQyxFQUFTQyxFQUFPLEdBQ3JDLEVDbkZFZ0IsRUFBVyxDQUNmQyxhQUFjLGVBQ2RILGNBQWUsZ0JBQ2ZJLHFCQUFzQixzQkFDdEJDLG9CQUFxQiw4QkFDckJiLGdCQUFpQixxQkFDakJELFdBQVksNkJBb0NSZSxFQUFPQyxTQUFTcEIsY0FBYyxTQUM5QnFCLEVBQVVGLEVBQUtuQixjQUFjLFlBQzdCc0IsRUFBb0JILEVBQUtuQixjQUFjLHNCQUN2Q3VCLEVBQTZCSixFQUFLbkIsY0FDdEMsK0JBRUl3QixFQUFnQkwsRUFBS25CLGNBQWMsa0JBQ25DeUIsRUFBbUJOLEVBQUtuQixjQUFjLGdCQUN0QzBCLEVBQXlCUCxFQUFLbkIsY0FBYyxzQkFDNUMyQixFQUFzQkYsRUFBaUJ6QixjQUFjLG9CQUNyRDRCLEVBQXdCUixTQUFTUyxNQUE2QixzQkFFOURDLEVBQWVYLEVBQUtuQixjQUFjLFlBQ2xDK0IsRUFBc0JELEVBQWE5QixjQUFjLHNCQUNqRGdDLEVBQXlCUCxFQUFpQnpCLGNBQzlDLDJCQUVJaUMsRUFBK0JQLEVBQXVCMUIsY0FDMUQsaUNBRUlrQyxFQUFnQ1IsRUFBdUIxQixjQUMzRCxrQ0FHSW1DLEVBQXFCTCxFQUFhOUIsY0FBYyx1QkFDaERvQyxFQUFrQlgsRUFBaUJ6QixjQUFjLG9CQUVqRHFDLEVBQWNqQixTQUFTUyxNQUFtQixZQUMxQ1MsRUFBb0JuQixFQUFLbkIsY0FBYyxtQkFDdkN1QyxFQUFhRCxFQUFrQnRDLGNBQWMsaUJBQzdDd0MsRUFBa0JGLEVBQWtCdEMsY0FBYyx1QkFDbER5QyxFQUFldEIsRUFBS25CLGNBQWMsVUFDbEMwQyxFQUFrQnZCLEVBQUtuQixjQUFjLHFCQUNyQzJDLEVBQ0pELEVBQWdCMUMsY0FBYyxzQkFDMUI0QyxFQUNKRixFQUFnQjFDLGNBQWMscUJBRTFCNkMsRUFBU25DLE1BQU1DLEtBQUtRLEVBQUtQLGlCQUFpQixXQUdoRCxJQUFJa0MsRUFDQUMsRUFFSixNQUFNQyxFQUFNLElDM0ZMLE1BQ0xDLFdBQUFBLENBQVlDLEdBR1ZDLEtBQUtDLFNBQVdGLENBQ2xCLENBRUFHLFdBQUFBLEdBQ0UsT0FBT0MsUUFBUUMsSUFBSSxDQUFDSixLQUFLSyxpQkFBa0JMLEtBQUtNLG1CQUNsRCxDQUVBQyxjQUFBQSxDQUFlQyxHQUNiLE9BQUlBLEVBQVNDLEdBQ0pELEVBQVNFLE9BR1hQLFFBQVFRLE9BQU8sVUFBVUMsSUFBSUMsU0FDdEMsQ0FFQVIsY0FBQUEsR0FDRSxPQUFPUyxNQUFNLEdBQUdkLEtBQUtDLFNBQVNjLG1CQUFvQixDQUNoREMsUUFBU2hCLEtBQUtDLFNBQVNlLFVBQ3RCQyxNQUFNTCxHQUNBWixLQUFLTyxlQUFlSyxJQUUvQixDQU9BTSxZQUFBQSxDQUFZQyxHQUFrQixJQUFqQixLQUFFQyxFQUFJLE1BQUVDLEdBQU9GLEVBQzFCLE9BQU9MLE1BQU0sR0FBR2QsS0FBS0MsU0FBU2MsbUJBQW9CLENBQ2hETyxPQUFRLFFBQ1JOLFFBQVNoQixLQUFLQyxTQUFTZSxRQUV2Qk8sS0FBTUMsS0FBS0MsVUFBVSxDQUNuQkwsT0FDQUMsWUFFREosTUFBTUwsR0FDQVosS0FBS08sZUFBZUssSUFFL0IsQ0FFQU4sZUFBQUEsR0FDRSxPQUFPUSxNQUFNLEdBQUdkLEtBQUtDLFNBQVNjLGdCQUFpQixDQUM3Q0MsUUFBU2hCLEtBQUtDLFNBQVNlLFVBQ3RCQyxNQUFNTCxHQUNBWixLQUFLTyxlQUFlSyxJQUUvQixDQUNBYyxRQUFBQSxDQUFTTixFQUFNTyxHQUNiLE9BQU9iLE1BQU0sR0FBR2QsS0FBS0MsU0FBU2MsZ0JBQWlCLENBQzdDTyxPQUFRLE9BQ1JOLFFBQVNoQixLQUFLQyxTQUFTZSxRQUV2Qk8sS0FBTUMsS0FBS0MsVUFBVSxDQUNuQkwsT0FDQU8sV0FFRFYsTUFBTUwsR0FDQVosS0FBS08sZUFBZUssSUFFL0IsQ0FDQWdCLFVBQUFBLENBQVdDLEdBQ1QsT0FBT2YsTUFBTSxHQUFHZCxLQUFLQyxTQUFTYyxpQkFBaUJjLElBQVUsQ0FDdkRQLE9BQVEsU0FDUk4sUUFBU2hCLEtBQUtDLFNBQVNlLFFBRXZCTyxLQUFNQyxLQUFLQyxVQUFVLENBQ25CSSxhQUVEWixNQUFNTCxHQUNBWixLQUFLTyxlQUFlSyxJQUUvQixDQUNBa0IsT0FBQUEsQ0FBUUQsRUFBUVAsR0FDZCxPQUFPUixNQUFNLEdBQUdkLEtBQUtDLFNBQVNjLGlCQUFpQmMsVUFBZ0IsQ0FDN0RQLE9BQVFBLEVBQ1JOLFFBQVNoQixLQUFLQyxTQUFTZSxRQUV2Qk8sS0FBTUMsS0FBS0MsVUFBVSxDQUNuQkksYUFFRFosTUFBTUwsR0FDQVosS0FBS08sZUFBZUssSUFFL0IsQ0FDQW1CLG9CQUFBQSxDQUFxQkMsR0FDbkIsT0FBT2xCLE1BQU0sR0FBR2QsS0FBS0MsU0FBU2MsMEJBQTJCLENBQ3ZETyxPQUFRLFFBQ1JOLFFBQVNoQixLQUFLQyxTQUFTZSxRQUV2Qk8sS0FBTUMsS0FBS0MsVUFBVSxDQUNuQlEsT0FBUUQsTUFFVGYsTUFBTUwsR0FDQVosS0FBS08sZUFBZUssSUFFL0IsR0RWa0IsQ0FDbEJHLFFBQVMsa0RBQ1RDLFFBQVMsQ0FDUGtCLGNBQWUsdUNBQ2YsZUFBZ0Isc0JBSXBCckMsRUFDR0ssY0FDQWUsTUFBS0UsSUFBc0IsSUFBcEJqRCxFQUFTaUUsR0FBTWhCLEVBcUN6QixJQUEyQmlCLElBbkNMbEUsRUFvQ3BCbUUsRUFBZ0IsR0FBR0MsWUFBY0YsRUFBZWhCLEtBQ2hEaUIsRUFBZ0IsR0FBR0MsWUFBY0YsRUFBZWYsTUFDaERrQixFQUFpQkMsSUFBTUosRUFBZUgsT0FwQ3BDUSxFQUFZTixFQUFNLElBRW5CTyxPQUFNQyxJQUFrQixJQUFoQkMsRUFBTUMsR0FBS0YsRUFDbEJHLFFBQVFDLE1BQU1ILEVBQU1DLEVBQUssSUFxQzdCLE1BQU1HLEVBQWFoRixFQUFLbkIsY0FBYyx3QkFDaEN3RixFQUFrQixDQUN0QlcsRUFBV25HLGNBQWMsaUJBQ3pCbUcsRUFBV25HLGNBQWMseUJBR3JCb0csRUFBbUIsQ0FDdkIzRSxFQUFpQnpCLGNBQWMsU0FDL0J5QixFQUFpQnpCLGNBQWMsaUJBRzNCcUcsRUFBb0IsQ0FDeEJ2RSxFQUFhOUIsY0FBYyxZQUMzQjhCLEVBQWE5QixjQUFjLGFBR3ZCMEYsRUFBbUJyRSxFQUFRckIsY0FBYyxrQkFFekNzRyxFQUNKNUUsRUFBdUIxQixjQUFjLFlBK0p2QyxTQUFTNEYsRUFBWVcsR0FDbkIsR0FBSTdGLE1BQU04RixRQUFRRCxHQUNoQkEsRUFBS3pGLFNBQVMyRixJQUVaLE1BQU1DLEVBQWNDLEVBQWVGLEdBRW5DaEUsRUFBYW1FLE9BQU9GLEVBQVksUUFJN0IsQ0FDTCxNQUFNQSxFQUFjQyxFQUFlSixHQUNuQzlELEVBQWFvRSxRQUFRSCxFQUN2QixDQUNGLENBRUEsU0FBU0ksRUFBbUJDLEdBQzFCQSxFQUFXN0csVUFBVThHLE9BQU8sOEJBQzlCLENBTUEsU0FBU0wsRUFBZU0sR0FDdEIsTUFBTUMsRUFBY3pFLEVBQ2pCekMsY0FBYyxTQUNkbUgsUUFBUW5ILGNBQWMsU0FDdEJvSCxXQUFVLEdBRVBDLEVBQVlILEVBQVlsSCxjQUFjLGdCQUM1Q3FILEVBQVUxQixJQUFNc0IsRUFBU25DLEtBQ3pCdUMsRUFBVUMsSUFBTUwsRUFBUzFDLEtBQ3pCMkMsRUFBWWxILGNBQWMsc0JBQXNCeUYsWUFBY3dCLEVBQVMxQyxLQUd2RSxNQUFNd0MsRUFBYUcsRUFBWWxILGNBQWMsc0JBK0I3QyxPQTVCSWlILEVBQVNNLFNBQ1hULEVBQW1CQyxHQUVyQkEsRUFBV1MsaUJBQWlCLFNBQVMsTUE2QnZDLFNBQXdCVCxFQUFZL0IsR0FDN0IrQixFQUFXN0csVUFBVXVILFNBQVMsK0JBU2pDekUsRUFDR2lDLFFBQVFELEVBQVEsVUFDaEJaLE1BQU1zRCxJQUNMekIsUUFBUTBCLElBQUlELEdBQ1paLEVBQW1CQyxFQUFXLElBRS9CbEIsTUFBTUksUUFBUUMsT0FkakJsRCxFQUNHaUMsUUFBUUQsRUFBUSxPQUNoQlosTUFBTXNELElBQ0x6QixRQUFRMEIsSUFBSUQsR0FDWlosRUFBbUJDLEVBQVcsSUFFL0JsQixNQUFNSSxRQUFRQyxNQVVyQixDQTlDSTBCLENBQWViLEVBQVlFLEVBQVNZLElBQUksSUFHckJYLEVBQVlsSCxjQUFjLHdCQUlsQ3dILGlCQUFpQixTQUFTLEtBQ3JDMUUsRUFBZW9FLEVBQ2ZuRSxFQUFpQmtFLEVBQVNZLElBRzFCQyxFQUFVcEYsRUFBZ0IsSUFPNUIyRSxFQUFVRyxpQkFBaUIsU0FBUyxLQWdDdEMsSUFBb0JmLEVBQU1zQixFQUFOdEIsRUEvQkxTLEVBK0JXYSxFQS9CRVYsRUFnQzFCOUUsRUFBV29ELElBQU1vQyxFQUFNcEMsSUFDdkJwRCxFQUFXK0UsSUFBTVMsRUFBTVQsSUFDdkI5RSxFQUFnQmlELFlBQWNnQixFQUFLaEIsWUFDbkNxQyxFQUFVeEYsRUFuQzBCLElBSTdCNEUsQ0FDVCxDQW9IQSxTQUFTWSxFQUFVRSxHQUNqQkEsRUFBTTlILFVBQVUrSCxJQUFJLGdCQUNwQjdHLFNBQVNvRyxpQkFBaUIsVUFBV1UsRUFHdkMsQ0FDQSxTQUFTQyxFQUFXSCxHQUNsQkEsRUFBTTlILFVBQVVDLE9BQU8sZ0JBQ3ZCaUIsU0FBU2dILG9CQUFvQixVQUFXRixFQUMxQyxDQTdWQTVHLEVBQWtCa0csaUJBQWlCLFNBQVMsS0FDMUMvRyxFQUFzQ2dCLEVBQWtCVixHQUN4RFQsRUFBb0JxQixHQUNwQm1HLEVBQVVyRyxHQUlWLElBQUssSUFBSTRHLEVBQUksRUFBR0EsRUFBSWpDLEVBQWlCa0MsT0FBUUQsSUFDM0NqQyxFQUFpQmlDLEdBQUdFLE1BQVEvQyxFQUFnQjZDLEdBQUc1QyxXQUNqRCxJQUdGbEUsRUFBMkJpRyxpQkFBaUIsU0FBUyxLQUNuRC9HLEVBQXNDaUIsRUFBd0JYLEdBQzlEVCxFQUFvQnNCLEdBQ3BCa0csRUFBVXBHLEVBQXVCLElBd0luQ2lCLEVBQXdCNkUsaUJBQWlCLFNBdEJ6QyxXQUVFN0UsRUFBd0I4QyxZQUFjLGNBQ3RDekMsRUFDRytCLFdBQVdoQyxHQUNYcUIsTUFBSyxLQWFWLElBQW9CcUMsS0FYSDNELEdBWVYzQyxPQUFPc0csR0FWUjBCLEVBQVd6RixFQUFnQixJQUU1Qm1ELE1BQU1JLFFBQVFDLE9BQ2RzQyxTQUFRLEtBRVA3RixFQUF3QjhDLFlBQWMsUUFBUSxHQUVwRCxJQU9BN0MsRUFBdUI0RSxpQkFBaUIsU0FBUyxJQUMvQ1csRUFBV3pGLEtBeUdZSixFQUFrQnRDLGNBQWMscUJBQ3hDd0gsaUJBQWlCLFNBQVMsS0FDekNXLEVBQVc3RixFQUFrQixJQUdLSSxFQUFnQjFDLGNBQ2xELGdDQUUwQndILGlCQUFpQixTQUFTLEtBQ3BEVyxFQUFXekYsRUFBZ0IsSUFxRjdCLE1BQU13RixFQUFzQk8sSUFHVixXQUFaQSxFQUFJQyxLQUFnQyxRQUFaRCxFQUFJQyxLQUc5QjdGLEVBQU8vQixTQUFTNkgsSUFFVkEsRUFBTXpJLFVBQVV1SCxTQUFTLGlCQUMzQlUsRUFBV1EsRUFDYixHQUVKLEVEemdCSyxJQUEwQjVJLEVDOGdCakM4QyxFQUFPL0IsU0FBUzZILElBRWRBLEVBQU1uQixpQkFBaUIsYUFBY2lCLElBR2pDRSxFQUFNekksVUFBVXVILFNBQVMsaUJBRXpCZ0IsRUFBSUcsU0FBV0gsRUFBSUksZUFFbkJWLEVBQVdNLEVBQUlHLE9BQ2pCLEdBQ0EsSUFnRko1RyxFQUF1QndGLGlCQUFpQixTQUFTLEtBQy9DVyxFQUFXMUcsRUFBaUIsSUFFOUJRLEVBQTZCdUYsaUJBQWlCLFNBQVMsS0FDckRXLEVBQVd6RyxFQUF1QixJQUVwQ0YsRUFBY2dHLGlCQUFpQixTQUFTLEtBQ3RDTSxFQUFVaEcsRUFBYSxJQUd6QkssRUFBbUJxRixpQkFBaUIsU0FBUyxXQUMzQ1csRUFBV3JHLEVBQ2IsSUFHQU0sRUFBZ0JvRixpQkFBaUIsVUF0YWpDLFNBQWlDaUIsR0FFL0JBLEVBQUlLLGlCQUdKbkgsRUFBb0I4RCxZQUFjLFlBSWxDekMsRUFDR3FCLGFBQWEsQ0FDWkUsS0FBTTZCLEVBQWlCLEdBQUdtQyxNQUMxQi9ELE1BQU80QixFQUFpQixHQUFHbUMsUUFFNUJuRSxNQUFNc0QsSUFLTCxJQUFLLElBQUlXLEVBQUksRUFBR0EsRUFBSWpDLEVBQWlCa0MsT0FBUUQsSUFDM0M3QyxFQUFnQjZDLEdBQUc1QyxZQUFjVyxFQUFpQmlDLEdBQUdFLE1BRXZEakksRUFBb0JxQixHQUNwQlMsRUFBZ0IyRyxRQUVoQlosRUFBVzFHLEVBQWlCLElBRTdCb0UsT0FBT21ELElBQ04vQyxRQUFRQyxNQUFNOEMsRUFBSSxJQUduQlIsU0FBUSxLQUVQN0csRUFBb0I4RCxZQUFjLE1BQU0sR0FFOUMsSUFvWUFwRCxFQUFZbUYsaUJBQWlCLFVBbFk3QixTQUFpQ2lCLEdBRS9CQSxFQUFJSyxpQkFHSi9HLEVBQW9CMEQsWUFBYyxZQUlsQyxNQUFNd0IsRUFBVyxDQUNmMUMsS0FBTThCLEVBQWtCLEdBQUdrQyxNQUMzQnpELEtBQU11QixFQUFrQixHQUFHa0MsT0FHN0J2RixFQUNHNkIsU0FBU29DLEVBQVMxQyxLQUFNMEMsRUFBU25DLE1BQ2pDVixNQUFNc0QsSUFJTDlCLEVBQVk4QixHQUVacEgsRUFBb0J5QixHQUdwQk0sRUFBWTBHLFFBRVpaLEVBQVdyRyxFQUFhLElBRXpCK0QsT0FBT21ELElBQ04vQyxRQUFRQyxNQUFNOEMsRUFBSSxJQUVuQlIsU0FBUSxLQUVQekcsRUFBb0IwRCxZQUFjLE1BQU0sR0FFOUMsSUErVkE3RCxFQUFzQjRGLGlCQUNwQixVQXpjRixTQUEyQ2lCLEdBRXpDQSxFQUFJSyxpQkFJSjVHLEVBQThCdUQsWUFBYyxZQUc1Q3pDLEVBQ0drQyxxQkFBcUJvQixFQUFpQ2lDLE9BQ3REbkUsTUFBTXNELElBTUxoQyxFQUFpQkMsSUFBTVcsRUFBaUNpQyxNQUN4RGpJLEVBQW9CNEIsR0FDcEJOLEVBQXNCbUgsUUFFdEJaLEVBQVd6RyxFQUF1QixJQUVuQ21FLE9BQU9tRCxJQUNOL0MsUUFBUUMsTUFBTThDLEVBQUksSUFFbkJSLFNBQVEsS0FFUHRHLEVBQThCdUQsWUFBYyxNQUFNLEdBRXhELElEaE5pQzFGLEVDK25CaEJnQixFRDduQkVLLFNBQVNSLGlCQUFpQmIsRUFBT2lCLGNBQ3pDRixTQUFTbUksS0FRcEIsU0FBMkJwSixFQUFNRSxHQUMvQixNQUFNbUosRUFBZ0J4SSxNQUFNQyxLQUFLZCxFQUFLZSxpQkFBaUJiLEVBQU9jLGdCQUc5RHFJLEVBQWNwSSxTQUFTaEIsSUFDckJBLEVBQVEwSCxpQkFBaUIsU0FBVTJCLEtBU3ZDLFNBQTRCdEosRUFBTUMsRUFBU0MsR0FDcENELEVBQVFzSixTQUFTQyxNQUlwQnpKLEVBQWVDLEVBQU1DLEVBQVNDLEdBS2xDLFNBQXdCRixFQUFNQyxFQUFTQyxHQUNyQyxNQUFNdUosRUFBYXpKLEVBQUtHLGNBQWMsSUFBSUYsRUFBUUcsWUFDbERxSixFQUFXN0QsWUFBYzNGLEVBQVF5SixrQkFDakNELEVBQVdwSixVQUFVK0gsSUFBSWxJLEVBQU9LLFlBQ2hDTixFQUFRSSxVQUFVK0gsSUFBSWxJLEVBQU9NLGdCQUMvQixDQWJJbUosQ0FBZTNKLEVBQU1DLEVBQVNDLEVBS2xDLENBZk0wSixDQUFtQjVKLEVBQU1DLEVBQVNDLEdBaUN4QyxTQUE2QjJKLEVBQVc3SixFQUFNRSxHQUM1QyxNQUFNNEosRUFBZTlKLEVBQUtHLGNBQWNELEVBQU9rQixzQkFVeEJ5SSxJQUNoQkEsRUFBVUUsTUFBTUMsSUFDYkEsRUFBYVQsU0FBU0MsUUFYNUJTLENBQWdCSixHQUVsQnBKLEVBQW9CcUosR0FHcEJBLEVBQWFuSixVQUFXLENBRTVCLENBekNNdUosQ0FBb0JiLEVBQWVySixFQUFNRSxFQUFPLEdBQ2hELEdBRU4sQ0FoQklpSyxDQUFrQmYsRUFBUWxKLEVBQU8sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvc2NyaXB0cy92YWxpZGF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy8uL3V0aWxzL0FwaS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBleHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4vLyAgIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbi8vICAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4vLyAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uLXNhdmVcIixcbi8vICAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uLXNhdmVfZGlzYWJsZWRcIixcbi8vICAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF9lcnJvclwiLFxuLy8gICBlcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcbi8vIH07XG5cbi8vIGZ1bmN0aW9uIHRvIHNlbGVjdGluZyBhbGwgZm9ybXMgYW5kIGVuYWJsZSB2YWxpZGF0aW9uXG5leHBvcnQgZnVuY3Rpb24gZW5hYmxlVmFsaWRhdGlvbihjb25maWcpIHtcbiAgLy8gU2VsZWN0aW5nIGFsbCBmb3Jtc1xuICBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoY29uZmlnLmZvcm1TZWxlY3Rvcik7XG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbCkgPT4ge1xuICAgIC8vIENhbGwgZXZlbnQgbGlzdGVuZXIgZnVuY3Rpb24gYW5kIHNldCBvbiBlYWNoIGZvcm1cbiAgICBzZXRFdmVudExpc3RlbmVycyhmb3JtRWwsIGNvbmZpZyk7XG4gIH0pO1xufVxuLy8gZW5hYmxlVmFsaWRhdGlvbihzZXR0aW5ncyk7XG5cbi8vIFNldCBldmVudCBsaXN0ZW5lclxuZnVuY3Rpb24gc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybSwgY29uZmlnKSB7XG4gIGNvbnN0IGlucHV0RWxlbWVudHMgPSBBcnJheS5mcm9tKGZvcm0ucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xuXG4gIC8vIGZvciBlYWNoIGlucHV0IGVsZW1lbnQgY2FsbCB2YWxpZGF0aW9uIGNoZWNrZXJcbiAgaW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGUpID0+IHtcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtLCBpbnB1dEVsLCBjb25maWcpO1xuICAgICAgdG9nZ2xlU3VibWl0QnV0dG9ucyhpbnB1dEVsZW1lbnRzLCBmb3JtLCBjb25maWcpO1xuICAgIH0pO1xuICB9KTtcbn1cblxuLy8gZnVuY3Rpb24gdG8gY2hlY2sgaW5wdXQgdmFsaWRpdHkgYW5kIGNhbGwgZnVuY3Rpb25cbi8vIHRvIGRlc3BsYXkgZXJyb3Igb3Igbm90XG5mdW5jdGlvbiBjaGVja0lucHV0VmFsaWRpdHkoZm9ybSwgaW5wdXRFbCwgY29uZmlnKSB7XG4gIGlmICghaW5wdXRFbC52YWxpZGl0eS52YWxpZCkge1xuICAgIHNob3dJbnB1dEVycm9yKGZvcm0sIGlucHV0RWwsIGNvbmZpZyk7XG4gICAgLy8gY29uc29sZS5sb2coaW5wdXRFbC52YWxpZGl0eS50eXBlTWlzbWF0Y2gpO1xuICB9IGVsc2Uge1xuICAgIGhpZGVJbnB1dEVycm9yKGZvcm0sIGlucHV0RWwsIGNvbmZpZyk7XG4gIH1cbn1cblxuLy8gZnVuY3Rpb24gdG8gc2VsZWN0IGFuZCBzaG93IGVycm9yXG5mdW5jdGlvbiBzaG93SW5wdXRFcnJvcihmb3JtLCBpbnB1dEVsLCBjb25maWcpIHtcbiAgY29uc3QgaW5wdXRFcnJvciA9IGZvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgaW5wdXRFcnJvci50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gIGlucHV0RXJyb3IuY2xhc3NMaXN0LmFkZChjb25maWcuZXJyb3JDbGFzcyk7XG4gIGlucHV0RWwuY2xhc3NMaXN0LmFkZChjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn1cblxuLy8gZnVuY3Rpb24gdG8gaGlkZSBlcnJvclxuZnVuY3Rpb24gaGlkZUlucHV0RXJyb3IoZm9ybSwgaW5wdXRFbCwgY29uZmlnKSB7XG4gIGNvbnN0IGlucHV0RXJyb3IgPSBmb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWwuaWR9LWVycm9yYCk7XG4gIGlucHV0RXJyb3IuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuZXJyb3JDbGFzcyk7XG4gIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbn1cblxuLy8gZnVuY3Rpb24gaWYgYW55IGlucHV0IGlzIG5vdCB2YWxpZCBkaXNhYmxlIHN1Ym1pdCBidXR0b25cbmZ1bmN0aW9uIHRvZ2dsZVN1Ym1pdEJ1dHRvbnMoaW5wdXRMaXN0LCBmb3JtLCBjb25maWcpIHtcbiAgY29uc3Qgc3VibWl0QnV0dG9uID0gZm9ybS5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gIGlmIChoYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSkge1xuICAgIC8vIHN1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICBkaXNhYmxlU3VibWl0QnV0dG9uKHN1Ym1pdEJ1dHRvbik7XG4gIH0gZWxzZSB7XG4gICAgLy8gc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgIHN1Ym1pdEJ1dHRvbi5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG59XG5cbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcbiAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgfSk7XG59O1xuXG5leHBvcnQgY29uc3QgZGlzYWJsZVN1Ym1pdEJ1dHRvbiA9IChidXR0b25FbCkgPT4ge1xuICBidXR0b25FbC5kaXNhYmxlZCA9IHRydWU7XG59O1xuXG4vLyBmdW5jdGlvbiB0byByZXNldCBlcnJvciBkaXNwbGF5ZWQgaW4gZWRpdCBwcm9maWxlIGZvcm0gYWZ0ZXIgY2xvc2VkXG5leHBvcnQgY29uc3QgcmVzZXRFcnJvckRpc3BsYXllZEluRWRpdFByb2ZpbGVNb2RhbCA9IChmb3JtLCBjb25maWcpID0+IHtcbiAgY29uc3QgaW5wdXRFbGVtZW50cyA9IEFycmF5LmZyb20oZm9ybS5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XG5cbiAgLy8gZm9yIGVhY2ggaW5wdXQgZWxlbWVudCBjYWxsIGZ1bmN0aW9uIHRvIGhpZGUgZXJyb3JcbiAgaW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybSwgaW5wdXRFbCwgY29uZmlnKTtcbiAgfSk7XG59O1xuIiwiaW1wb3J0IHtcbiAgcmVzZXRFcnJvckRpc3BsYXllZEluRWRpdFByb2ZpbGVNb2RhbCxcbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbixcbiAgZW5hYmxlVmFsaWRhdGlvbixcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xuY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uLXNhdmVcIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fYnV0dG9uLXNhdmVfZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF9lcnJvclwiLFxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dC1lcnJvcl9hY3RpdmVcIixcbn07XG5pbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xuaW1wb3J0IHsgQXBpIH0gZnJvbSBcIi4uLy4uL3V0aWxzL0FwaS5qc1wiO1xuLy8gSW5pdGlhbCBkYXRhIG9mIGltYWdlIGNhcmRzXG5jb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIkdvbGRlbiBHYXRlIGJyaWRnZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy83LXBob3RvLWJ5LWdyaWZmaW4td29vbGRyaWRnZS1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiVmFsIFRob3JlbnNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMS1waG90by1ieS1tb3JpdHotZmVsZG1hbm4tZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlJlc3RhdXJhbnQgdGVycmFjZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy8yLXBob3RvLWJ5LWNlaWxpbmUtZnJvbS1wZXhlbHMuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkFuIG91dGRvb3IgY2FmZVwiLFxuICAgIGxpbms6IFwiIGh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvc3BvdHMvMy1waG90by1ieS10dWJhbnVyLWRvZ2FuLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJBIHZlcnkgbG9uZyBicmlkZ2UsIG92ZXIgdGhlIGZvcmVzdCBhbmQgdGhyb3VnaCB0aGUgdHJlZXNcIixcbiAgICBsaW5rOiBcIiBodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL3Nwb3RzLzQtcGhvdG8tYnktbWF1cmljZS1sYXNjaGV0LWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJUdW5uZWwgd2l0aCBtb3JuaW5nIGxpZ2h0XCIsXG4gICAgbGluazogXCIgaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy81LXBob3RvLWJ5LXZhbi1hbmgtbmd1eWVuLWZyb20tcGV4ZWxzLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJNb3VudGFpbiBob3VzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9zcG90cy82LXBob3RvLWJ5LW1vcml0ei1mZWxkbWFubi1mcm9tLXBleGVscy5qcGdcIixcbiAgfSxcbl07XG4vLyBGaW5kaW5nIGFuZCBkZWZpbmluZyBIVE1MIGVsZW1lbnRzIGFzIHZhcmlhYmxlc1xuY29uc3QgcGFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGFnZVwiKTtcbmNvbnN0IHByb2ZpbGUgPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZVwiKTtcbmNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gcGFnZS5xdWVyeVNlbGVjdG9yKFwiI2VkaXRQcm9maWxlQnV0dG9uXCIpO1xuY29uc3QgZWRpdFByb2ZpbGVPdmVybGF5ZWRCdXR0b24gPSBwYWdlLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI2VkaXRQcm9maWxlT3ZlcmxheWVkQnV0dG9uXCJcbik7XG5jb25zdCBuZXdQb3N0QnV0dG9uID0gcGFnZS5xdWVyeVNlbGVjdG9yKFwiI25ld1Bvc3RCdXR0b25cIik7XG5jb25zdCBtb2RhbEVkaXRQcm9maWxlID0gcGFnZS5xdWVyeVNlbGVjdG9yKFwiI2VkaXRQcm9maWxlXCIpO1xuY29uc3QgbW9kYWxFZGl0UHJvZmlsZUF2YXRhciA9IHBhZ2UucXVlcnlTZWxlY3RvcihcIiNlZGl0UHJvZmlsZUF2YXRhclwiKTtcbmNvbnN0IHN1Ym1pdFByb2ZpbGVCdXR0b24gPSBtb2RhbEVkaXRQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIjc2F2ZUVkaXRQcm9maWxlXCIpO1xuY29uc3QgZm9ybUVkaXRQcm9maWxlQXZhdGFyID0gZG9jdW1lbnQuZm9ybXNbXCJlZGl0UHJvZmlsZUF2YXRhckZvcm1cIl07XG5cbmNvbnN0IG1vZGFsTmV3UG9zdCA9IHBhZ2UucXVlcnlTZWxlY3RvcihcIiNuZXdQb3N0XCIpO1xuY29uc3Qgc3VibWl0TmV3UG9zdEJ1dHRvbiA9IG1vZGFsTmV3UG9zdC5xdWVyeVNlbGVjdG9yKFwiI3NhdmVOZXdQb3N0QnV0dG9uXCIpO1xuY29uc3QgY2xvc2VFZGl0UHJvZmlsZUJ1dHRvbiA9IG1vZGFsRWRpdFByb2ZpbGUucXVlcnlTZWxlY3RvcihcbiAgXCIjY2xvc2VFZGl0UHJvZmlsZUJ1dHRvblwiXG4pO1xuY29uc3QgY2xvc2VFZGl0UHJvZmlsZUF2YXRhckJ1dHRvbiA9IG1vZGFsRWRpdFByb2ZpbGVBdmF0YXIucXVlcnlTZWxlY3RvcihcbiAgXCIjY2xvc2VFZGl0UHJvZmlsZUF2YXRhckJ1dHRvblwiXG4pO1xuY29uc3QgZWRpdFByb2ZpbGVBdmF0YXJTdWJtaXRCdXR0b24gPSBtb2RhbEVkaXRQcm9maWxlQXZhdGFyLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI2VkaXRQcm9maWxlQXZhdGFyU3VibWl0QnV0dG9uXCJcbik7XG5cbmNvbnN0IGNsb3NlTmV3UG9zdEJ1dHRvbiA9IG1vZGFsTmV3UG9zdC5xdWVyeVNlbGVjdG9yKFwiI2Nsb3NlTmV3UG9zdEJ1dHRvblwiKTtcbmNvbnN0IGZvcm1FZGl0UHJvZmlsZSA9IG1vZGFsRWRpdFByb2ZpbGUucXVlcnlTZWxlY3RvcihcIiNmb3JtRWRpdFByb2ZpbGVcIik7XG4vLyBjb25zdCBmb3JtTmV3UG9zdCA9IG1vZGFsTmV3UG9zdC5xdWVyeVNlbGVjdG9yKFwiI2Zvcm1OZXdQb3N0XCIpOyBvciBiZXR0ZXI6XG5jb25zdCBmb3JtTmV3UG9zdCA9IGRvY3VtZW50LmZvcm1zW1wiZm9ybU5ld1Bvc3RcIl07XG5jb25zdCBlbmxhcmdlTW9kYWxJbWFnZSA9IHBhZ2UucXVlcnlTZWxlY3RvcihcIiNjbGlja2VkUGljdHVyZVwiKTtcbmNvbnN0IG1vZGFsSW1hZ2UgPSBlbmxhcmdlTW9kYWxJbWFnZS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmNvbnN0IG1vZGFsSW1hZ2VUaXRsZSA9IGVubGFyZ2VNb2RhbEltYWdlLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLXRpdGxlXCIpO1xuY29uc3QgY2FyZHNFbGVtZW50ID0gcGFnZS5xdWVyeVNlbGVjdG9yKFwiLmNhcmRzXCIpO1xuY29uc3QgbW9kYWxEZWxldGVDYXJkID0gcGFnZS5xdWVyeVNlbGVjdG9yKFwiI2RlbGV0ZUltYWdlUXVlcnlcIik7XG5jb25zdCBjb25maXJtQ2FyZERlbGV0ZUJ1dHRvbiA9XG4gIG1vZGFsRGVsZXRlQ2FyZC5xdWVyeVNlbGVjdG9yKFwiI2NvbmZpcm1DYXJkRGVsZXRlXCIpO1xuY29uc3QgY2FuY2VsQ2FyZERlbGV0ZUJ1dHRvbiA9XG4gIG1vZGFsRGVsZXRlQ2FyZC5xdWVyeVNlbGVjdG9yKFwiI2NhbmNlbENhcmREZWxldGVcIik7XG4vLyBBcnJheSBvZiBhbGwgbW9kYWxzIGFrYSBwb3AgdXBzXG5jb25zdCBwb3BVcHMgPSBBcnJheS5mcm9tKHBhZ2UucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbFwiKSk7XG4vLyBPdXRzaWRlIG9mIGFueSBmdW5jdGlvbnMsIGRlY2xhcmUgdmFyaWFibGVzIHRvIHN0b3JlIHRoZSBjdXJyZW50IHNlbGVjdGVkXG4vLyBjYXJkIGFuZCBpdHMgSUQuIFlvdSB3aWxsIGFzc2lnbiB0aGVtIHZhbHVlcyB3aGVuIGEgZGVsZXRlIGljb24gaXMgY2xpY2tlZC5cbmxldCBzZWxlY3RlZENhcmQ7XG5sZXQgc2VsZWN0ZWRDYXJkSWQ7XG5cbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLWFwaS5lbi50cmlwbGV0ZW4tc2VydmljZXMuY29tL3YxXCIsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBcIjI2MzEzMmY2LTEwMGQtNDIyZi05ZGViLWNiNGEyMjM0Y2ZkMVwiLFxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxuICB9LFxufSk7XG5cbmFwaVxuICAuZ2V0VXNlckRhdGEoKVxuICAudGhlbigoW3Byb2ZpbGUsIGNhcmRzXSkgPT4ge1xuICAgIC8vIFJlbmRlciB1c2VyIHByb2ZpbGVcbiAgICBzZXRJbml0aWFsUHJvZmlsZShwcm9maWxlKTtcbiAgICAvLyBEaXNwbGF5IGluaXRpYWwgY2FyZHNcbiAgICBkaXNwbGF5Q2FyZChjYXJkcyk7XG4gIH0pXG4gIC5jYXRjaCgoW2VycjEsIGVycjJdKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIxLCBlcnIyKTsgLy8gbG9nIHRoZSBlcnJvciB0byB0aGUgY29uc29sZVxuICB9KTtcblxuLy8gVXNlIFByb21pc2UuYWxsIGluc3RlYWQuIENhcmRzIHNob3VsZCBiZSByZW5kZXJlZCBhZnRlciB0aGUgdXNlclxuLy8gaW5mb3JtYXRpb24gaXMgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyLiDQoXJlYXRlIGEgZnVuY3Rpb24gaW4gQXBpLmpzIGFuZFxuLy8gcmV0dXJuIHRoZSBQcm9taXNlLmFsbCgpIG1ldGhvZC4gUGFzcyB0aGUgYXJyYXkgb2YgZnVuY3Rpb24gY2FsbHMgZm9yXG4vLyBnZXR0aW5nIHVzZXIgaW5mb3JtYXRpb24gYW5kIHRoZSBsaXN0IG9mIGNhcmRzIHRvIFByb21pc2UuYWxsKCkgYXMgYSBwYXJhbWV0ZXIuXG4vLyBhcGlcbi8vICAgLnJlbmRlclVzZXJJbmZvKClcbi8vICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuLy8gICAgIC8vIHByb2Nlc3MgdGhlIHJlc3VsdFxuLy8gICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4vLyAgICAgc2V0SW5pdGlhbFByb2ZpbGUocmVzdWx0KTtcbi8vICAgfSlcbi8vICAgLmNhdGNoKChlcnIpID0+IHtcbi8vICAgICBjb25zb2xlLmVycm9yKGVycik7IC8vIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcbi8vICAgfSk7XG5cbi8vICAgLy8gTG9hZGluZyBjYXJkcyBmcm9tIHRoZSBzZXJ2ZXJcbi8vIGFwaVxuLy8gLmdldEluaXRpYWxDYXJkcygpXG4vLyAudGhlbigocmVzdWx0KSA9PiB7XG4vLyAgIC8vIHByb2Nlc3MgdGhlIHJlc3VsdFxuLy8gICAvLyBjb25zb2xlLmxvZyhyZXN1bHQpO1xuLy8gICBkaXNwbGF5Q2FyZChyZXN1bHQpO1xuLy8gfSlcbi8vIC5jYXRjaCgoZXJyKSA9PiB7XG4vLyAgIGNvbnNvbGUuZXJyb3IoZXJyKTsgLy8gbG9nIHRoZSBlcnJvciB0byB0aGUgY29uc29sZVxuLy8gfSk7XG5cbmZ1bmN0aW9uIHNldEluaXRpYWxQcm9maWxlKGluaXRpYWxQcm9maWxlKSB7XG4gIHByb2ZpbGVJbmZvU2F2ZVswXS50ZXh0Q29udGVudCA9IGluaXRpYWxQcm9maWxlLm5hbWU7XG4gIHByb2ZpbGVJbmZvU2F2ZVsxXS50ZXh0Q29udGVudCA9IGluaXRpYWxQcm9maWxlLmFib3V0O1xuICBtb2RhbEF2YXRhckltYWdlLnNyYyA9IGluaXRpYWxQcm9maWxlLmF2YXRhcjtcbn1cblxuLy8gRGVmaW5pbmcgcHJvZmlsZSBhbmQgbmV3cG9zdCBtb2RhbHMnIHZhcmlhYmxlc1xuY29uc3QgYXZhdGFySW5mbyA9IHBhZ2UucXVlcnlTZWxlY3RvcihcIi5hdmF0YXJfX2luZm9ybWF0aW9uXCIpO1xuY29uc3QgcHJvZmlsZUluZm9TYXZlID0gW1xuICBhdmF0YXJJbmZvLnF1ZXJ5U2VsZWN0b3IoXCIuYXZhdGFyX19uYW1lXCIpLFxuICBhdmF0YXJJbmZvLnF1ZXJ5U2VsZWN0b3IoXCIuYXZhdGFyX19kZXNjcmlwdGlvblwiKSxcbl07XG5cbmNvbnN0IHByb2ZpbGVJbmZvVmFsdWUgPSBbXG4gIG1vZGFsRWRpdFByb2ZpbGUucXVlcnlTZWxlY3RvcihcIiNuYW1lXCIpLFxuICBtb2RhbEVkaXRQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIjZGVzY3JpcHRpb25cIiksXG5dO1xuXG5jb25zdCBtb2RhbE5ld1Bvc3RWYWx1ZSA9IFtcbiAgbW9kYWxOZXdQb3N0LnF1ZXJ5U2VsZWN0b3IoXCIjcGljdHVyZVwiKSxcbiAgbW9kYWxOZXdQb3N0LnF1ZXJ5U2VsZWN0b3IoXCIjY2FwdGlvblwiKSxcbl07XG5cbmNvbnN0IG1vZGFsQXZhdGFySW1hZ2UgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIuYXZhdGFyX19pbWFnZVwiKTtcblxuY29uc3QgbW9kYWxFZGl0UHJvZmlsZUF2YXRhckltYWdlSW5wdXQgPVxuICBtb2RhbEVkaXRQcm9maWxlQXZhdGFyLnF1ZXJ5U2VsZWN0b3IoXCIjcGljdHVyZVwiKTtcblxuLy8gLy8gRXZlbnQgbGlzdGVuZXJzIHRvIHRvZ2dsZSBlZGl0IHByb2ZpbGUgYW5kIG5ld3Bvc3QgbW9kYWxzIG9uIGFuZCBvZmZcbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHJlc2V0RXJyb3JEaXNwbGF5ZWRJbkVkaXRQcm9maWxlTW9kYWwobW9kYWxFZGl0UHJvZmlsZSwgc2V0dGluZ3MpO1xuICBkaXNhYmxlU3VibWl0QnV0dG9uKHN1Ym1pdFByb2ZpbGVCdXR0b24pO1xuICBvcGVuTW9kYWwobW9kYWxFZGl0UHJvZmlsZSk7XG5cbiAgLy8gVE9ETzogR2V0IHRoZSB2YWx1ZXMgb2YgZWFjaCBmb3JtIGZpZWxkIGZyb20gdGhlIHZhbHVlIHByb3BlcnR5XG4gIC8vIG9mIHRoZSBjb3JyZXNwb25kaW5nIGlucHV0IGVsZW1lbnQuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvZmlsZUluZm9WYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgIHByb2ZpbGVJbmZvVmFsdWVbaV0udmFsdWUgPSBwcm9maWxlSW5mb1NhdmVbaV0udGV4dENvbnRlbnQ7XG4gIH1cbn0pO1xuXG5lZGl0UHJvZmlsZU92ZXJsYXllZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICByZXNldEVycm9yRGlzcGxheWVkSW5FZGl0UHJvZmlsZU1vZGFsKG1vZGFsRWRpdFByb2ZpbGVBdmF0YXIsIHNldHRpbmdzKTtcbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbihmb3JtRWRpdFByb2ZpbGVBdmF0YXIpO1xuICBvcGVuTW9kYWwobW9kYWxFZGl0UHJvZmlsZUF2YXRhcik7XG5cbiAgLy8gVE9ETzogR2V0IHRoZSB2YWx1ZXMgb2YgZWFjaCBmb3JtIGZpZWxkIGZyb20gdGhlIHZhbHVlIHByb3BlcnR5XG4gIC8vIG9mIHRoZSBjb3JyZXNwb25kaW5nIGlucHV0IGVsZW1lbnQuXG59KTtcbi8vIEhhbmRsZSBzdWJtaXR0ZWQgcHJvZmlsZSBmdW5jdGlvblxuZnVuY3Rpb24gaGFuZGxlRWRpdFByb2ZpbGVBdmF0YXJGb3JtU3VibWl0KGV2dCkge1xuICAvLyBQcmV2ZW50IGRlZmF1bHQgYnJvd3NlciBiZWhhdmlvciwgc2VlIGV4cGxhbmF0aW9uIGJlbG93LlxuICBldnQucHJldmVudERlZmF1bHQoKTtcblxuICAvLyBub3RpZnkgdGhlIHVzZXIgdGhhdCB0aGUgdXBsb2FkIHByb2Nlc3MgaXMgdW5kZXJ3YXlcbiAgLy8gYnkgY2hhbmdpbmcgdGhlIGJ1dHRvbiB0ZXh0IHRvIFwiU2F2aW5nLi4uXCJcbiAgZWRpdFByb2ZpbGVBdmF0YXJTdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuXG4gIC8vIFNlbmQgdGhlIGZvbGxvd2luZyBQQVRDSCByZXF1ZXN0IHRvIGNoYW5nZSB0aGUgcHJvZmlsZSBwaWN0dXJlXG4gIGFwaVxuICAgIC5jaGFuZ2VQcm9maWxlUGljdHVyZShtb2RhbEVkaXRQcm9maWxlQXZhdGFySW1hZ2VJbnB1dC52YWx1ZSlcbiAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAvLyBwcm9jZXNzIHRoZSByZXN1bHRcbiAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdCk7XG5cbiAgICAgIC8vIFRPRE86IFRoZW4gaW5zZXJ0IHRoZXNlIG5ldyB2YWx1ZXMgaW50byB0aGUgc3JjIHByb3BlcnR5IG9mIHRoZVxuICAgICAgLy8gcHJvZmlsZSBpbWFnZS5cbiAgICAgIG1vZGFsQXZhdGFySW1hZ2Uuc3JjID0gbW9kYWxFZGl0UHJvZmlsZUF2YXRhckltYWdlSW5wdXQudmFsdWU7XG4gICAgICBkaXNhYmxlU3VibWl0QnV0dG9uKGVkaXRQcm9maWxlQXZhdGFyU3VibWl0QnV0dG9uKTtcbiAgICAgIGZvcm1FZGl0UHJvZmlsZUF2YXRhci5yZXNldCgpO1xuICAgICAgLy8gVE9ETzogQ2xvc2UgdGhlIG1vZGFsLlxuICAgICAgY2xvc2VNb2RhbChtb2RhbEVkaXRQcm9maWxlQXZhdGFyKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7IC8vIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIC8vIENoYW5nZSBidXR0b24gdGV4dCBiYWNrIHRvIG9yaWdpbmFsXG4gICAgICBlZGl0UHJvZmlsZUF2YXRhclN1Ym1pdEJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xuICAgIH0pO1xufVxuLy8gSGFuZGxlIHN1Ym1pdHRlZCBwcm9maWxlIGZ1bmN0aW9uXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChldnQpIHtcbiAgLy8gUHJldmVudCBkZWZhdWx0IGJyb3dzZXIgYmVoYXZpb3IsIHNlZSBleHBsYW5hdGlvbiBiZWxvdy5cbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgLy8gQ2hhbmdlIGJ1dHRvbiB0ZXh0IHRvIFwiU2F2aW5nLi4uXCJcbiAgc3VibWl0UHJvZmlsZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XG5cbiAgLy8gRWRpdGluZyB0aGUgcHJvZmlsZSB0ZXh0IGNvbnRlbnRcbiAgLy8gU2F2ZSB0byBzZXJ2ZXIsIGNhbGwgQVBJIGFuZCBlZGl0VXNlckluZm86IC91ZXJzL21lXG4gIGFwaVxuICAgIC5lZGl0VXNlckluZm8oe1xuICAgICAgbmFtZTogcHJvZmlsZUluZm9WYWx1ZVswXS52YWx1ZSxcbiAgICAgIGFib3V0OiBwcm9maWxlSW5mb1ZhbHVlWzFdLnZhbHVlLFxuICAgIH0pXG4gICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgLy8gcHJvY2VzcyB0aGUgcmVzdWx0XG4gICAgICAvLyBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgLy8gVE9ETzogVGhlbiBpbnNlcnQgdGhlc2UgbmV3IHZhbHVlcyBpbnRvIHRoZSB0ZXh0Q29udGVudCBwcm9wZXJ0eSBvZiB0aGVcbiAgICAgIC8vIGNvcnJlc3BvbmRpbmcgcHJvZmlsZSBlbGVtZW50cy5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvZmlsZUluZm9WYWx1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBwcm9maWxlSW5mb1NhdmVbaV0udGV4dENvbnRlbnQgPSBwcm9maWxlSW5mb1ZhbHVlW2ldLnZhbHVlO1xuICAgICAgfVxuICAgICAgZGlzYWJsZVN1Ym1pdEJ1dHRvbihzdWJtaXRQcm9maWxlQnV0dG9uKTtcbiAgICAgIGZvcm1FZGl0UHJvZmlsZS5yZXNldCgpO1xuICAgICAgLy8gVE9ETzogQ2xvc2UgdGhlIG1vZGFsLlxuICAgICAgY2xvc2VNb2RhbChtb2RhbEVkaXRQcm9maWxlKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7IC8vIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcbiAgICB9KVxuXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgLy8gQ2hhbmdlIGJ1dHRvbiB0ZXh0IGJhY2sgdG8gb3JpZ2luYWxcbiAgICAgIHN1Ym1pdFByb2ZpbGVCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmVcIjtcbiAgICB9KTtcbn1cblxuZnVuY3Rpb24gaGFuZGxlZm9ybU5ld1Bvc3RTdWJtaXQoZXZ0KSB7XG4gIC8vIFByZXZlbnQgZGVmYXVsdCBicm93c2VyIGJlaGF2aW9yLCBzZWUgZXhwbGFuYXRpb24gYmVsb3cuXG4gIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gIC8vIENoYW5nZSBidXR0b24gdGV4dCB0byBcIlNhdmluZy4uLlwiXG4gIHN1Ym1pdE5ld1Bvc3RCdXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xuXG4gIC8vIFRPRE86IFRoZW4gaW5zZXJ0IHRoZXNlIG5ldyB2YWx1ZXNcblxuICBjb25zdCBjYXJkRGF0YSA9IHtcbiAgICBuYW1lOiBtb2RhbE5ld1Bvc3RWYWx1ZVsxXS52YWx1ZSxcbiAgICBsaW5rOiBtb2RhbE5ld1Bvc3RWYWx1ZVswXS52YWx1ZSxcbiAgfTtcbiAgLy8gU2VuZCBhIFBPU1QgcmVxdWVzdCB0byBhZGQgYSBuZXcgY2FyZCB0byB0aGUgc2VydmVyOlxuICBhcGlcbiAgICAucG9zdENhcmQoY2FyZERhdGEubmFtZSwgY2FyZERhdGEubGluaylcbiAgICAudGhlbigocmVzdWx0KSA9PiB7XG4gICAgICAvLyBwcm9jZXNzIHRoZSByZXN1bHRcbiAgICAgIC8vIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAvLyBDYWxsIHRoZSBmdW5jdGlvbiB0byBkaXNwbGF5IGFkZGVkIGNhcmRcbiAgICAgIGRpc3BsYXlDYXJkKHJlc3VsdCk7XG5cbiAgICAgIGRpc2FibGVTdWJtaXRCdXR0b24oc3VibWl0TmV3UG9zdEJ1dHRvbik7XG4gICAgICAvLyBDbGVhciB0aGUgaW5wdXRzIGFmdGVyIGEgc3VjY2Vzc2Z1bCBhZGRpbmcgb2YgYSBuZXcgY2FyZFxuICAgICAgLy8gdG8gbGV0IHRoZSB1c2VyIGFkZCB0aGUgMm5kIG9uZSBhZ2FpbiB3aXRob3V0IGhhdmluZyB0byByZW1vdmUgdGhlIG9sZCBkYXRhIG1hbnVhbGx5LlxuICAgICAgZm9ybU5ld1Bvc3QucmVzZXQoKTtcbiAgICAgIC8vIFRPRE86IENsb3NlIHRoZSBtb2RhbC5cbiAgICAgIGNsb3NlTW9kYWwobW9kYWxOZXdQb3N0KTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7IC8vIGxvZyB0aGUgZXJyb3IgdG8gdGhlIGNvbnNvbGVcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIC8vIENoYW5nZSBidXR0b24gdGV4dCBiYWNrIHRvIG9yaWdpbmFsXG4gICAgICBzdWJtaXROZXdQb3N0QnV0dG9uLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XG4gICAgfSk7XG59XG4vLyBUaGUgc3VibWlzc2lvbiBoYW5kbGVyIG1ha2VzIHVzZSBvZiB0aGUgc2VsZWN0ZWRDYXJkIGFuZCBzZWxlY3RlZENhcmRJZFxuLy8gdmFyaWFibGVzIHRvIHRhcmdldCB0aGUgY29ycmVjdCBjYXJkLlxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlU3VibWl0KCkge1xuICAvLyBDaGFuZ2UgYnV0dG9uIHRleHQgdG8gXCJTYXZpbmcuLi5cIlxuICBjb25maXJtQ2FyZERlbGV0ZUJ1dHRvbi50ZXh0Q29udGVudCA9IFwiRGVsZXRpbmcuLi5cIjtcbiAgYXBpXG4gICAgLnJlbW92ZUNhcmQoc2VsZWN0ZWRDYXJkSWQpIC8vIHBhc3MgdGhlIElEIHRoZSB0aGUgYXBpIGZ1bmN0aW9uXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgLy8gcmVtb3ZlIHRoZSBjYXJkIGZyb20gdGhlIERPTVxuICAgICAgZGVsZXRlQ2FyZChzZWxlY3RlZENhcmQpO1xuICAgICAgLy8gY2xvc2UgdGhlIG1vZGFsXG4gICAgICBjbG9zZU1vZGFsKG1vZGFsRGVsZXRlQ2FyZCk7XG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAvLyBDaGFuZ2UgYnV0dG9uIHRleHQgYmFjayB0byBvcmlnaW5hbFxuICAgICAgY29uZmlybUNhcmREZWxldGVCdXR0b24udGV4dENvbnRlbnQgPSBcIkRlbGV0ZVwiO1xuICAgIH0pO1xufVxuLy9EZWxldGUgY2FyZCBmdW5jdGlvblxuZnVuY3Rpb24gZGVsZXRlQ2FyZChjYXJkKSB7XG4gIGNhcmQucmVtb3ZlKGNhcmQpO1xufVxuXG5jb25maXJtQ2FyZERlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgaGFuZGxlRGVsZXRlU3VibWl0KTtcbmNhbmNlbENhcmREZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gIGNsb3NlTW9kYWwobW9kYWxEZWxldGVDYXJkKVxuKTtcbi8vRGVzcGxheSBpbml0YWwgY2FyZHMgb3IgYWRkZWQgY2FyZFxuZnVuY3Rpb24gZGlzcGxheUNhcmQoZGF0YSkge1xuICBpZiAoQXJyYXkuaXNBcnJheShkYXRhKSkge1xuICAgIGRhdGEuZm9yRWFjaCgoY2FyZCkgPT4ge1xuICAgICAgLy8gUGFzcyB0aGUgYXJyYXkgaXRlbSB0byB5b3VyIGdldENhcmRFbGVtZW50KCkgZnVuY3Rpb24gdG8gY3JlYXRlIGEgY2FyZCBlbGVtZW50LlxuICAgICAgY29uc3QgY2FyZERpc3BsYXkgPSBnZXRDYXJkRWxlbWVudChjYXJkKTtcbiAgICAgIC8vIFVzZSB0aGUgYXBwcm9wcmlhdGUgYnVpbHQtaW4gRE9NIG1ldGhvZCB0byBhZGQgdGhpcyBIVE1MIGVsZW1lbnQgdG8gdGhlIHBhZ2UuXG4gICAgICBjYXJkc0VsZW1lbnQuYXBwZW5kKGNhcmREaXNwbGF5KTtcbiAgICB9KTtcblxuICAgIC8vIFRoaXMgaXMgZm9yIHVzZXIgaW5wdXQgc2luZ2xlIGNhcmQsIHNlcGFyYXRlIGZyb20gaW5pdGlhbCBjYXJkcycgYXJyYXlcbiAgfSBlbHNlIHtcbiAgICBjb25zdCBjYXJkRGlzcGxheSA9IGdldENhcmRFbGVtZW50KGRhdGEpO1xuICAgIGNhcmRzRWxlbWVudC5wcmVwZW5kKGNhcmREaXNwbGF5KTtcbiAgfVxufVxuLy8gQWN0aXZhdGUgbG92ZSBidXR0b25cbmZ1bmN0aW9uIGFjdGl2YXRlTG92ZUJ1dHRvbihsb3ZlQnV0dG9uKSB7XG4gIGxvdmVCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xvdmUtYnV0dG9uX2FjdGl2YXRlZFwiKTtcbn1cblxuLy8gQ2FsbCBkaXNwbGF5IGNhcmQgZnVudGlvbiB0byBkaXNwbGF5IGluaXRpYWwgY2FyZHMnIGFycmF5XG4vLyBkaXNwbGF5Q2FyZChpbml0aWFsQ2FyZHMpO1xuXG4vL01ha2UgY2FyZCBmcm9tIHRlbXBsYXRlIGZ1bmN0aW9uXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmRzRWxlbWVudFxuICAgIC5xdWVyeVNlbGVjdG9yKFwiI2NhcmRcIilcbiAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRcIilcbiAgICAuY2xvbmVOb2RlKHRydWUpO1xuICAvLyBzZWxlY3QgdGhlIGNhcmQgdGl0bGUgYW5kIGltYWdlIGFuZCBzdG9yZSB0aGVtIGluIHZhcmlhYmxlc1xuICBjb25zdCBjYXJkSW1hZ2UgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xuICBjYXJkSW1hZ2Uuc3JjID0gY2FyZERhdGEubGluaztcbiAgY2FyZEltYWdlLmFsdCA9IGNhcmREYXRhLm5hbWU7XG4gIGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVzY3JpcHRpb25cIikudGV4dENvbnRlbnQgPSBjYXJkRGF0YS5uYW1lO1xuXG4gIC8vU2V0IGxvdmUgYnV0dG9uXG4gIGNvbnN0IGxvdmVCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xvdmUtYnV0dG9uXCIpO1xuXG4gIC8vIENoZWNrIGlmIGN1cnJlbnQgdXNlciBoYXMgYWxyZWFkeSBsaWtlZCB0aGlzIGNhcmRcbiAgaWYgKGNhcmREYXRhLmlzTGlrZWQpIHtcbiAgICBhY3RpdmF0ZUxvdmVCdXR0b24obG92ZUJ1dHRvbik7XG4gIH1cbiAgbG92ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGVkaXRMb3ZlQnV0dG9uKGxvdmVCdXR0b24sIGNhcmREYXRhLl9pZCk7XG4gIH0pO1xuICAvLyBTZXQgZGVsZXRlIGJ1dHRvblxuICBjb25zdCBkZWxldGVCdXR0b24gPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG5cbiAgLy8gTW9kaWZ5IGl0IHNvIHRoYXQgeW91IGNhbiBwYXNzIHRoZSBjYXJkIGVsZW1lbnQgYXMgYW4gYXJndW1lbnQsIGFzIHdlbGxcbiAgLy8gYXMgdGhlIGNhcmQgZGF0YS5cbiAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgc2VsZWN0ZWRDYXJkID0gY2FyZEVsZW1lbnQ7IC8vIEFzc2lnbiB0aGUgY2FyZCBlbGVtZW50IHRvIHNlbGVjdGVkQ2FyZFxuICAgIHNlbGVjdGVkQ2FyZElkID0gY2FyZERhdGEuX2lkOyAvLyBBc3NpZ24gdGhlIGNhcmQncyBJRCB0byBzZWxlY3RlZENhcmRJZFxuXG4gICAgLy8gb3BlbiB0aGUgZGVsZXRlIGNvbmZpcm1hdGlvbiBtb2RhbFxuICAgIG9wZW5Nb2RhbChtb2RhbERlbGV0ZUNhcmQpO1xuICB9KTtcbiAgLy8gU2V0IGltYWdlIGNsaWNrIGJ1dHRvblxuICAvLyBjb25zdCBpbWFnZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2UtYnV0dG9uXCIpO1xuICAvLyBpbWFnZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAvLyAgIGNsaWNrSW1hZ2UoY2FyZEVsZW1lbnQsIGNhcmRJbWFnZSk7XG4gIC8vIH0pOyBJbnN0ZWFkIG9mIGNyZWVhdGluZyBhIGJ1dHRvbiBqdXN0IGxpc3RlbiBvbiB0aGUgaW1hZ2UgZWxlbWVudCBjbGlja1xuICBjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBjbGlja0ltYWdlKGNhcmRFbGVtZW50LCBjYXJkSW1hZ2UpO1xuICB9KTtcblxuICAvL3JldHVybiB0aGUgcmVhZHkgSFRNTCBlbGVtZW50IHdpdGggdGhlIGZpbGxlZC1pbiBkYXRhXG4gIHJldHVybiBjYXJkRWxlbWVudDtcbn1cblxuLy9BY3RpdmF0ZSBsb3ZlIGJ1dHRvbiBmdW50aW9uXG5mdW5jdGlvbiBlZGl0TG92ZUJ1dHRvbihsb3ZlQnV0dG9uLCBjYXJkSWQpIHtcbiAgaWYgKCFsb3ZlQnV0dG9uLmNsYXNzTGlzdC5jb250YWlucyhcImNhcmRfX2xvdmUtYnV0dG9uX2FjdGl2YXRlZFwiKSkge1xuICAgIGFwaVxuICAgICAgLmFkZExpa2UoY2FyZElkLCBcIlBVVFwiKSAvLyBwYXNzIHRoZSBJRCB0aGUgdGhlIGFwaSBmdW5jdGlvblxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICBhY3RpdmF0ZUxvdmVCdXR0b24obG92ZUJ1dHRvbik7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICB9IGVsc2Uge1xuICAgIGFwaVxuICAgICAgLmFkZExpa2UoY2FyZElkLCBcIkRFTEVURVwiKSAvLyBwYXNzIHRoZSBJRCB0aGUgdGhlIGFwaSBmdW5jdGlvblxuICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICBhY3RpdmF0ZUxvdmVCdXR0b24obG92ZUJ1dHRvbik7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xuICB9XG59XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4vLyBDbGljayBpbWFnZSB0byBlbmxhcmdlIGZ1bmN0aW9uXG5mdW5jdGlvbiBjbGlja0ltYWdlKGNhcmQsIGltYWdlKSB7XG4gIG1vZGFsSW1hZ2Uuc3JjID0gaW1hZ2Uuc3JjO1xuICBtb2RhbEltYWdlLmFsdCA9IGltYWdlLmFsdDtcbiAgbW9kYWxJbWFnZVRpdGxlLnRleHRDb250ZW50ID0gY2FyZC50ZXh0Q29udGVudDtcbiAgb3Blbk1vZGFsKGVubGFyZ2VNb2RhbEltYWdlKTtcbn1cblxuLy8gU2V0IGltYWdlIGNsb3NlIGJ1dHRvblxuY29uc3QgY2xvc2VJbWFnZUJ1dHRvbiA9IGVubGFyZ2VNb2RhbEltYWdlLnF1ZXJ5U2VsZWN0b3IoXCIjY2xvc2VJbWFnZUJ1dHRvblwiKTtcbmNsb3NlSW1hZ2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgY2xvc2VNb2RhbChlbmxhcmdlTW9kYWxJbWFnZSk7XG59KTtcbi8vIFNldCBkZWxldGVJbWFnZVF1ZXJ5IGNsb3NlIGJ1dHRvblxuY29uc3QgY2xvc2VEZWxldGVJbWFnZVF1ZXJ5QnV0dG9uID0gbW9kYWxEZWxldGVDYXJkLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI2Nsb3NlRGVsZXRlSW1hZ2VRdWVyeUJ1dHRvblwiXG4pO1xuY2xvc2VEZWxldGVJbWFnZVF1ZXJ5QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwobW9kYWxEZWxldGVDYXJkKTtcbn0pO1xuXG4vLyAvL0FjdGl2YXRlIGxvdmUgYnV0dG9uIGZ1bnRpb25cbi8vIGZ1bmN0aW9uIGFjdGl2YXRlTG92ZUJ1dHRvbihsb3ZlKSB7XG4vLyAgIGxvdmUuY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xvdmUtYnV0dG9uX2FjdGl2YXRlZFwiKTtcbi8vIH1cblxuLy8gLy9NYWtlIGNhcmQgZnJvbSB0ZW1wbGF0ZSBmdW5jdGlvblxuLy8gZnVuY3Rpb24gZ2V0Q2FyZEVsZW1lbnQoY2FyZERhdGEpIHtcbi8vICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkc0VsZW1lbnRcbi8vICAgICAucXVlcnlTZWxlY3RvcihcIiNjYXJkXCIpXG4vLyAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4vLyAgICAgLmNsb25lTm9kZSh0cnVlKTtcbi8vICAgLy8gc2VsZWN0IHRoZSBjYXJkIHRpdGxlIGFuZCBpbWFnZSBhbmQgc3RvcmUgdGhlbSBpbiB2YXJpYWJsZXNcbi8vICAgY29uc3QgY2FyZEltYWdlID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbi8vICAgY2FyZEltYWdlLnNyYyA9IGNhcmREYXRhLmxpbms7XG4vLyAgIGNhcmRJbWFnZS5hbHQgPSBjYXJkRGF0YS5uYW1lO1xuLy8gICBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2Rlc2NyaXB0aW9uXCIpLnRleHRDb250ZW50ID0gY2FyZERhdGEubmFtZTtcblxuLy8gICAvL1NldCBsb3ZlIGJ1dHRvblxuLy8gICBjb25zdCBsb3ZlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19sb3ZlLWJ1dHRvblwiKTtcbi8vICAgbG92ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gICAgIGFjdGl2YXRlTG92ZUJ1dHRvbihsb3ZlQnV0dG9uKTtcbi8vICAgfSk7XG4vLyAgIC8vIFNldCBkZWxldGUgYnV0dG9uXG4vLyAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ1dHRvblwiKTtcbi8vICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4vLyAgICAgZGVsZXRlQ2FyZChjYXJkRWxlbWVudCk7XG4vLyAgIH0pO1xuLy8gICAvLyBTZXQgaW1hZ2UgY2xpY2sgYnV0dG9uXG4vLyAgIC8vIGNvbnN0IGltYWdlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZS1idXR0b25cIik7XG4vLyAgIC8vIGltYWdlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4vLyAgIC8vICAgY2xpY2tJbWFnZShjYXJkRWxlbWVudCwgY2FyZEltYWdlKTtcbi8vICAgLy8gfSk7IEluc3RlYWQgb2YgY3JlZWF0aW5nIGEgYnV0dG9uIGp1c3QgbGlzdGVuIG9uIHRoZSBpbWFnZSBlbGVtZW50IGNsaWNrXG4vLyAgIGNhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuLy8gICAgIGNsaWNrSW1hZ2UoY2FyZEVsZW1lbnQsIGNhcmRJbWFnZSk7XG4vLyAgIH0pO1xuXG4vLyAgIC8vcmV0dXJuIHRoZSByZWFkeSBIVE1MIGVsZW1lbnQgd2l0aCB0aGUgZmlsbGVkLWluIGRhdGFcbi8vICAgcmV0dXJuIGNhcmRFbGVtZW50O1xuLy8gfVxuXG4vLyAvL0Rlc3BsYXkgaW5pdGFsIGNhcmRzIG9yIGFkZGVkIGNhcmRcbi8vIGZ1bmN0aW9uIGRpc3BsYXlDYXJkKGRhdGEpIHtcbi8vICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkpIHtcbi8vICAgICBkYXRhLmZvckVhY2goKGNhcmQpID0+IHtcbi8vICAgICAgIC8vIFBhc3MgdGhlIGFycmF5IGl0ZW0gdG8geW91ciBnZXRDYXJkRWxlbWVudCgpIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIGNhcmQgZWxlbWVudC5cbi8vICAgICAgIGNvbnN0IGNhcmREaXNwbGF5ID0gZ2V0Q2FyZEVsZW1lbnQoY2FyZCk7XG4vLyAgICAgICAvLyBVc2UgdGhlIGFwcHJvcHJpYXRlIGJ1aWx0LWluIERPTSBtZXRob2QgdG8gYWRkIHRoaXMgSFRNTCBlbGVtZW50IHRvIHRoZSBwYWdlLlxuLy8gICAgICAgY2FyZHNFbGVtZW50LmFwcGVuZChjYXJkRGlzcGxheSk7XG4vLyAgICAgfSk7XG5cbi8vICAgICAvLyBUaGlzIGlzIGZvciB1c2VyIGlucHV0IHNpbmdsZSBjYXJkLCBzZXBhcmF0ZSBmcm9tIGluaXRpYWwgY2FyZHMnIGFycmF5XG4vLyAgIH0gZWxzZSB7XG4vLyAgICAgY29uc3QgY2FyZERpc3BsYXkgPSBnZXRDYXJkRWxlbWVudChkYXRhKTtcbi8vICAgICBjYXJkc0VsZW1lbnQucHJlcGVuZChjYXJkRGlzcGxheSk7XG4vLyAgIH1cbi8vIH1cblxuLy8gLy8gQ2FsbCBkaXNwbGF5IGNhcmQgZnVudGlvbiB0byBkaXNwbGF5IGluaXRpYWwgY2FyZHMnIGFycmF5XG4vLyBkaXNwbGF5Q2FyZChpbml0aWFsQ2FyZHMpO1xuXG4vLyBJZiB5b3Ugd2FudCB0byB1c2UgZm9yIGxvb3Bcbi8vIGZvciAobGV0IGkgPSAwOyBpIDwgaW5pdGlhbENhcmRzLmxlbmd0aDsgaSsrKSB7XG4vLyAgIC8vIFBhc3MgdGhlIGFycmF5IGl0ZW0gdG8geW91ciBnZXRDYXJkRWxlbWVudCgpIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIGNhcmQgZWxlbWVudC5cbi8vICAgY29uc3QgY2FyZCA9IGdldENhcmRFbGVtZW50KGluaXRpYWxDYXJkc1tpXSk7XG4vLyAgIGNvbnNvbGUubG9nKGNhcmQpO1xuXG4vLyBlZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgbW9kYWxPcGVuKTtcbi8vIGNsb3NlRWRpdFByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG1vZGFsQ2xvc2UpO1xuXG4vLyBPcGVuIG9yIGNsb3NlIG1vZGFsIHdpdGhvdXQgdXNpbmcgdG9nZ2xlOlxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlTW9kYWxVc2luZ0VzYyk7XG5cbiAgLy8gZGVidWdnZXI7XG59XG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XG4gIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIGNsb3NlTW9kYWxVc2luZ0VzYyk7XG59XG5cbi8vIEFmdGVyIGxpc3RlbmluZyB0byBlc2Mga2V5IHdoZW4gcHJlc3NlZCwgY2xvc2UgbW9kYWxcbmNvbnN0IGNsb3NlTW9kYWxVc2luZ0VzYyA9IChldnQpID0+IHtcbiAgLy8gZGVidWdnZXI7XG4gIC8vIGNvbnNvbGUubG9nKFwiYXQgRXNjXCIpO1xuICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIiB8fCBldnQua2V5ID09PSBcIkVzY1wiKSB7XG4gICAgLy8gWW91ciBjb2RlIHRvIGV4ZWN1dGUgd2hlbiB0aGUgRXNjYXBlIGtleSBpcyBwcmVzc2VkXG4gICAgLy8gZm9yIGVhY2ggZm9ybSBlbGVtZW50IGNoZWNrIGZvciB0aGUgb3BlbmVkIGZvcm0gYW5kIGNsb3NlIGl0XG4gICAgcG9wVXBzLmZvckVhY2goKHBvcFVwKSA9PiB7XG4gICAgICAvLyBkZWJ1Z2dlcjtcbiAgICAgIGlmIChwb3BVcC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbF9vcGVuZWRcIikpIHtcbiAgICAgICAgY2xvc2VNb2RhbChwb3BVcCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG5cbi8vIExpc3RlbiB0byBtb2RhbCBiYWNrZ3JvdW5kIHdoZW4gY2xpY2tlZCBhbmQgY2xvc2UgbW9kYWwgdXBvbiBjbGlja1xuXG5wb3BVcHMuZm9yRWFjaCgocG9wVXApID0+IHtcbiAgLy8gY29uc29sZS5sb2coXCJhdCBtb3VzZWRvd25cIik7XG4gIHBvcFVwLmFkZEV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgKGV2dCkgPT4ge1xuICAgIC8vIGNvbnNvbGUubG9nKFwiMVwiLCBldnQsIFwiMlwiLCBldnQudGFyZ2V0LCBcIjNcIiwgZXZ0LmN1cnJlbnRUYXJnZXQpO1xuICAgIGlmIChcbiAgICAgIHBvcFVwLmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5lZFwiKSAmJlxuICAgICAgLy9TbyB0aGF0IHRoZSBFc2MgZXZlbnQgbGlzdGVuZXIgaXMgbm90IHJlbW92ZWQgd2hlbiBpbWFnZSBpcyBjbGlja2VkXG4gICAgICBldnQudGFyZ2V0ID09PSBldnQuY3VycmVudFRhcmdldFxuICAgICkge1xuICAgICAgY2xvc2VNb2RhbChldnQudGFyZ2V0KTtcbiAgICB9XG4gIH0pO1xufSk7XG4vLyBjbG9zZU1vZGFsVXNpbmdCYWNrZ3JvdW5kKG1vZGFsKTtcbi8vIGNvbnN0IGNsb3NlTW9kYWxVc2luZ0JhY2tncm91bmQgPSAobW9kYWwpID0+IHtcbi8vICAgbW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XG4vLyAgICAgLy8gZXZ0LnRhcmdldC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xuLy8gICAgIGNsb3NlTW9kYWwoZXZ0LnRhcmdldCk7XG4vLyAgIH0pO1xuLy8gfTtcblxuLy8gUG9wLXVwIG9yIGNsb3NlIG1vZGFsICh0b2dnbGUgbW9kYWwpXG4vLyBmdW5jdGlvbiB0b2dnbGVNb2RhbChtb2RhbCkge1xuLy8gICBtb2RhbC5jbGFzc0xpc3QudG9nZ2xlKFwibW9kYWxfb3BlbmVkXCIpO1xuLy8gfVxuLy8gU2VsZWN0IGFsbCBtb2RhbCBlbGVtZW50cyAobm90IG5lZWRlZD8pXG4vLyBjb25zdCBtb2RhbEVsZW1lbnRzID0gcGFnZS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsXCIpO1xuLy8gZnVuY3Rpb24gbW9kYWxDbG9zZSgpIHtcbi8vICAgY29uc29sZS5sb2coXCJoZXJlXCIpO1xuLy8gICBtb2RhbEVsZW1lbnRzLmZvckVhY2goKG1vZGFsKSA9PlxuLy8gICAgIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4vLyAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4vLyAgICAgfSlcbi8vICAgKTtcbi8vIH1cblxuLy8gLy8gRXZlbnQgbGlzdGVuZXJzIHRvIHRvZ2dsZSBlZGl0IHByb2ZpbGUgYW5kIG5ld3Bvc3QgbW9kYWxzIG9uIGFuZCBvZmZcbi8vIGVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4vLyAgIHJlc2V0RXJyb3JEaXNwbGF5ZWRJbkVkaXRQcm9maWxlTW9kYWwobW9kYWxFZGl0UHJvZmlsZSwgc2V0dGluZ3MpO1xuLy8gICBkaXNhYmxlU3VibWl0QnV0dG9uKHN1Ym1pdFByb2ZpbGVCdXR0b24pO1xuLy8gICBvcGVuTW9kYWwobW9kYWxFZGl0UHJvZmlsZSk7XG4vLyAgIC8vIFRPRE86IEdldCB0aGUgdmFsdWVzIG9mIGVhY2ggZm9ybSBmaWVsZCBmcm9tIHRoZSB2YWx1ZSBwcm9wZXJ0eVxuLy8gICAvLyBvZiB0aGUgY29ycmVzcG9uZGluZyBpbnB1dCBlbGVtZW50LlxuXG4vLyAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvZmlsZUluZm9WYWx1ZS5sZW5ndGg7IGkrKykge1xuLy8gICAgIHByb2ZpbGVJbmZvVmFsdWVbaV0udmFsdWUgPSBwcm9maWxlSW5mb1NhdmVbaV0udGV4dENvbnRlbnQ7XG4vLyAgIH1cbi8vIH0pO1xuXG4vLyAvLyBIYW5kbGUgc3VibWl0dGVkIHByb2ZpbGUgZnVuY3Rpb25cbi8vIGZ1bmN0aW9uIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KGV2dCkge1xuLy8gICAvLyBQcmV2ZW50IGRlZmF1bHQgYnJvd3NlciBiZWhhdmlvciwgc2VlIGV4cGxhbmF0aW9uIGJlbG93LlxuLy8gICBldnQucHJldmVudERlZmF1bHQoKTtcblxuLy8gICAvLyBUT0RPOiBUaGVuIGluc2VydCB0aGVzZSBuZXcgdmFsdWVzIGludG8gdGhlIHRleHRDb250ZW50IHByb3BlcnR5IG9mIHRoZVxuLy8gICAvLyBjb3JyZXNwb25kaW5nIHByb2ZpbGUgZWxlbWVudHMuXG5cbi8vICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9maWxlSW5mb1ZhbHVlLmxlbmd0aDsgaSsrKSB7XG4vLyAgICAgcHJvZmlsZUluZm9TYXZlW2ldLnRleHRDb250ZW50ID0gcHJvZmlsZUluZm9WYWx1ZVtpXS52YWx1ZTtcbi8vICAgfVxuLy8gICAvLyBUT0RPOiBDbG9zZSB0aGUgbW9kYWwuXG4vLyAgIGNsb3NlTW9kYWwobW9kYWxFZGl0UHJvZmlsZSk7XG5cbi8vICAgZGlzYWJsZVN1Ym1pdEJ1dHRvbihzdWJtaXRQcm9maWxlQnV0dG9uKTtcbi8vICAgZm9ybUVkaXRQcm9maWxlLnJlc2V0KCk7XG4vLyB9XG5cbi8vIGZ1bmN0aW9uIGhhbmRsZWZvcm1OZXdQb3N0U3VibWl0KGV2dCkge1xuLy8gICAvLyBQcmV2ZW50IGRlZmF1bHQgYnJvd3NlciBiZWhhdmlvciwgc2VlIGV4cGxhbmF0aW9uIGJlbG93LlxuLy8gICBldnQucHJldmVudERlZmF1bHQoKTtcblxuLy8gICAvLyBUT0RPOiBUaGVuIGluc2VydCB0aGVzZSBuZXcgdmFsdWVzXG5cbi8vICAgY29uc3QgY2FyZERhdGEgPSB7XG4vLyAgICAgbmFtZTogbW9kYWxOZXdQb3N0VmFsdWVbMV0udmFsdWUsXG4vLyAgICAgbGluazogbW9kYWxOZXdQb3N0VmFsdWVbMF0udmFsdWUsXG4vLyAgIH07XG5cbi8vICAgLy8gQ2FsbCB0aGUgZnVuY3Rpb24gdG8gZGlzcGxheSBhZGRlZCBjYXJkXG4vLyAgIGRpc3BsYXlDYXJkKGNhcmREYXRhKTtcbi8vICAgLy8gVE9ETzogQ2xvc2UgdGhlIG1vZGFsLlxuLy8gICBjbG9zZU1vZGFsKG1vZGFsTmV3UG9zdCk7XG4vLyAgIC8vIENsZWFyIHRoZSBpbnB1dHMgYWZ0ZXIgYSBzdWNjZXNzZnVsIGFkZGluZyBvZiBhIG5ldyBjYXJkIHRvIGxldCB0aGUgdXNlciBhZGQgdGhlIDJuZCBvbmUgYWdhaW4gd2l0aG91dCBoYXZpbmcgdG8gcmVtb3ZlIHRoZSBvbGQgZGF0YSBtYW51YWxseS5cbi8vICAgZXZ0LnRhcmdldC5yZXNldCgpO1xuLy8gICAvLyBPclxuLy8gICAvLyBtb2RhbE5ld1Bvc3RWYWx1ZVsxXS52YWx1ZSA9IFwiXCI7XG4vLyAgIC8vIG1vZGFsTmV3UG9zdFZhbHVlWzBdLnZhbHVlID0gXCJcIjtcbi8vICAgZGlzYWJsZVN1Ym1pdEJ1dHRvbihzdWJtaXROZXdQb3N0QnV0dG9uKTtcbi8vIH1cblxuLy8gUG9wLXVwIG9yIGNsb3NlIG1vZGFsICh0b2dnbGUgbW9kYWwpIGV2ZW50IGxpc3RlbmVyc1xuY2xvc2VFZGl0UHJvZmlsZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBjbG9zZU1vZGFsKG1vZGFsRWRpdFByb2ZpbGUpO1xufSk7XG5jbG9zZUVkaXRQcm9maWxlQXZhdGFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNsb3NlTW9kYWwobW9kYWxFZGl0UHJvZmlsZUF2YXRhcik7XG59KTtcbm5ld1Bvc3RCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgb3Blbk1vZGFsKG1vZGFsTmV3UG9zdCk7XG59KTtcblxuY2xvc2VOZXdQb3N0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XG4gIGNsb3NlTW9kYWwobW9kYWxOZXdQb3N0KTtcbn0pO1xuXG4vLyBNb2RhbCBmb3JtIHN1Ym1pdCBldmVudCBsaXN0ZW5lcnMgZm9yIGVkaXQgcHJvZmlsZSBhbmQgbmV3IHBvc3RcbmZvcm1FZGl0UHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0KTtcbmZvcm1OZXdQb3N0LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgaGFuZGxlZm9ybU5ld1Bvc3RTdWJtaXQpO1xuZm9ybUVkaXRQcm9maWxlQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoXG4gIFwic3VibWl0XCIsXG4gIGhhbmRsZUVkaXRQcm9maWxlQXZhdGFyRm9ybVN1Ym1pdFxuKTtcbi8vIGVuYWJsZSB2YWxpZGF0aW9uXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcbiIsImV4cG9ydCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgLy8gY29uc3RydWN0b3IgYm9keVxuXG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG4gIH1cblxuICBnZXRVc2VyRGF0YSgpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMucmVuZGVyVXNlckluZm8oKSwgdGhpcy5nZXRJbml0aWFsQ2FyZHMoKV0pO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2UocmVzcG9uc2UpIHtcbiAgICBpZiAocmVzcG9uc2Uub2spIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfVxuICAgIC8vIGlmIHRoZSBzZXJ2ZXIgcmV0dXJucyBhbiBlcnJvciwgcmVqZWN0IHRoZSBwcm9taXNlXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xuICB9XG5cbiAgcmVuZGVyVXNlckluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX29wdGlvbnMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xuICAgIH0pO1xuICB9XG5cbiAgLy8gb3RoZXIgbWV0aG9kcyBmb3Igd29ya2luZyB3aXRoIHRoZSBBUElcblxuICAvLyBQYXNzIHRoZSBkYXRhIGFzIGFuIGFyZ3VtZW50LiBJbiB0aGlzIGV4YW1wbGUsIHdlIGFyZSB1c2luZyBkZXN0cnVjdHVyaW5nLFxuICAvLyBzbyB3ZSB3b3VsZCBuZWVkIHRvIHBhc3MgdGhlIGZ1bmN0aW9uIGFuIG9iamVjdCB3aXRoIHByb3BlcnRpZXMgY2FsbGVkXG4gIC8vIG5hbWUgYW5kIGFib3V0LlxuICBlZGl0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX29wdGlvbnMuYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX29wdGlvbnMuaGVhZGVycyxcbiAgICAgIC8vIFNlbmQgdGhlIGRhdGEgaW4gdGhlIGJvZHkgYXMgYSBKU09OIHN0cmluZy5cbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZSxcbiAgICAgICAgYWJvdXQsXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX29wdGlvbnMuYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnMsXG4gICAgfSkudGhlbigocmVzKSA9PiB7XG4gICAgICByZXR1cm4gdGhpcy5fY2hlY2tSZXNwb25zZShyZXMpO1xuICAgIH0pO1xuICB9XG4gIHBvc3RDYXJkKG5hbWUsIGxpbmspIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fb3B0aW9ucy5iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnMsXG4gICAgICAvLyBTZW5kIHRoZSBkYXRhIGluIHRoZSBib2R5IGFzIGEgSlNPTiBzdHJpbmcuXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWUsXG4gICAgICAgIGxpbmssXG4gICAgICB9KSxcbiAgICB9KS50aGVuKChyZXMpID0+IHtcbiAgICAgIHJldHVybiB0aGlzLl9jaGVja1Jlc3BvbnNlKHJlcyk7XG4gICAgfSk7XG4gIH1cbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fb3B0aW9ucy5iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnMsXG4gICAgICAvLyBTZW5kIHRoZSBkYXRhIGluIHRoZSBib2R5IGFzIGEgSlNPTiBzdHJpbmcuXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGNhcmRJZCxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcbiAgICB9KTtcbiAgfVxuICBhZGRMaWtlKGNhcmRJZCwgbWV0aG9kKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX29wdGlvbnMuYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnMsXG4gICAgICAvLyBTZW5kIHRoZSBkYXRhIGluIHRoZSBib2R5IGFzIGEgSlNPTiBzdHJpbmcuXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGNhcmRJZCxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcbiAgICB9KTtcbiAgfVxuICBjaGFuZ2VQcm9maWxlUGljdHVyZShwaWN0dXJlVXJsKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX29wdGlvbnMuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9vcHRpb25zLmhlYWRlcnMsXG4gICAgICAvLyBTZW5kIHRoZSBkYXRhIGluIHRoZSBib2R5IGFzIGEgSlNPTiBzdHJpbmcuXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIGF2YXRhcjogcGljdHVyZVVybCxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4oKHJlcykgPT4ge1xuICAgICAgcmV0dXJuIHRoaXMuX2NoZWNrUmVzcG9uc2UocmVzKTtcbiAgICB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImhpZGVJbnB1dEVycm9yIiwiZm9ybSIsImlucHV0RWwiLCJjb25maWciLCJxdWVyeVNlbGVjdG9yIiwiaWQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJlcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZGlzYWJsZVN1Ym1pdEJ1dHRvbiIsImJ1dHRvbkVsIiwiZGlzYWJsZWQiLCJyZXNldEVycm9yRGlzcGxheWVkSW5FZGl0UHJvZmlsZU1vZGFsIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJmb3JFYWNoIiwic2V0dGluZ3MiLCJmb3JtU2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJwYWdlIiwiZG9jdW1lbnQiLCJwcm9maWxlIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJlZGl0UHJvZmlsZU92ZXJsYXllZEJ1dHRvbiIsIm5ld1Bvc3RCdXR0b24iLCJtb2RhbEVkaXRQcm9maWxlIiwibW9kYWxFZGl0UHJvZmlsZUF2YXRhciIsInN1Ym1pdFByb2ZpbGVCdXR0b24iLCJmb3JtRWRpdFByb2ZpbGVBdmF0YXIiLCJmb3JtcyIsIm1vZGFsTmV3UG9zdCIsInN1Ym1pdE5ld1Bvc3RCdXR0b24iLCJjbG9zZUVkaXRQcm9maWxlQnV0dG9uIiwiY2xvc2VFZGl0UHJvZmlsZUF2YXRhckJ1dHRvbiIsImVkaXRQcm9maWxlQXZhdGFyU3VibWl0QnV0dG9uIiwiY2xvc2VOZXdQb3N0QnV0dG9uIiwiZm9ybUVkaXRQcm9maWxlIiwiZm9ybU5ld1Bvc3QiLCJlbmxhcmdlTW9kYWxJbWFnZSIsIm1vZGFsSW1hZ2UiLCJtb2RhbEltYWdlVGl0bGUiLCJjYXJkc0VsZW1lbnQiLCJtb2RhbERlbGV0ZUNhcmQiLCJjb25maXJtQ2FyZERlbGV0ZUJ1dHRvbiIsImNhbmNlbENhcmREZWxldGVCdXR0b24iLCJwb3BVcHMiLCJzZWxlY3RlZENhcmQiLCJzZWxlY3RlZENhcmRJZCIsImFwaSIsImNvbnN0cnVjdG9yIiwib3B0aW9ucyIsInRoaXMiLCJfb3B0aW9ucyIsImdldFVzZXJEYXRhIiwiUHJvbWlzZSIsImFsbCIsInJlbmRlclVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXNwb25zZSIsIm9rIiwianNvbiIsInJlamVjdCIsInJlcyIsInN0YXR1cyIsImZldGNoIiwiYmFzZVVybCIsImhlYWRlcnMiLCJ0aGVuIiwiZWRpdFVzZXJJbmZvIiwiX3JlZiIsIm5hbWUiLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwicG9zdENhcmQiLCJsaW5rIiwicmVtb3ZlQ2FyZCIsImNhcmRJZCIsImFkZExpa2UiLCJjaGFuZ2VQcm9maWxlUGljdHVyZSIsInBpY3R1cmVVcmwiLCJhdmF0YXIiLCJhdXRob3JpemF0aW9uIiwiY2FyZHMiLCJpbml0aWFsUHJvZmlsZSIsInByb2ZpbGVJbmZvU2F2ZSIsInRleHRDb250ZW50IiwibW9kYWxBdmF0YXJJbWFnZSIsInNyYyIsImRpc3BsYXlDYXJkIiwiY2F0Y2giLCJfcmVmMiIsImVycjEiLCJlcnIyIiwiY29uc29sZSIsImVycm9yIiwiYXZhdGFySW5mbyIsInByb2ZpbGVJbmZvVmFsdWUiLCJtb2RhbE5ld1Bvc3RWYWx1ZSIsIm1vZGFsRWRpdFByb2ZpbGVBdmF0YXJJbWFnZUlucHV0IiwiZGF0YSIsImlzQXJyYXkiLCJjYXJkIiwiY2FyZERpc3BsYXkiLCJnZXRDYXJkRWxlbWVudCIsImFwcGVuZCIsInByZXBlbmQiLCJhY3RpdmF0ZUxvdmVCdXR0b24iLCJsb3ZlQnV0dG9uIiwidG9nZ2xlIiwiY2FyZERhdGEiLCJjYXJkRWxlbWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjYXJkSW1hZ2UiLCJhbHQiLCJpc0xpa2VkIiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5zIiwicmVzdWx0IiwibG9nIiwiZWRpdExvdmVCdXR0b24iLCJfaWQiLCJvcGVuTW9kYWwiLCJpbWFnZSIsIm1vZGFsIiwiYWRkIiwiY2xvc2VNb2RhbFVzaW5nRXNjIiwiY2xvc2VNb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJpIiwibGVuZ3RoIiwidmFsdWUiLCJmaW5hbGx5IiwiZXZ0Iiwia2V5IiwicG9wVXAiLCJ0YXJnZXQiLCJjdXJyZW50VGFyZ2V0IiwicHJldmVudERlZmF1bHQiLCJyZXNldCIsImVyciIsImZvcm1FbCIsImlucHV0RWxlbWVudHMiLCJlIiwidmFsaWRpdHkiLCJ2YWxpZCIsImlucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInNob3dJbnB1dEVycm9yIiwiY2hlY2tJbnB1dFZhbGlkaXR5IiwiaW5wdXRMaXN0Iiwic3VibWl0QnV0dG9uIiwic29tZSIsImlucHV0RWxlbWVudCIsImhhc0ludmFsaWRJbnB1dCIsInRvZ2dsZVN1Ym1pdEJ1dHRvbnMiLCJzZXRFdmVudExpc3RlbmVycyJdLCJzb3VyY2VSb290IjoiIn0=